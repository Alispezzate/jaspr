---
title: SyncStateMixin
description: Syncing the state of a StatefulComponent from server to client.
---

# SyncStateMixin
*Syncing the state of a StatefulComponent from server to client.*
---

Alongside with preloading some data on the server, you often want to also sync the data with the client.
The `SyncStateMixin` lets you sync state of a StatefulComponent from the server with the client.

<Info>
For a general guide about data-fetching on the server see [Data Fetching](/concepts/data_fetching).
</Info>

## Usage

The `SyncStateMixin` accepts a second type argument for the data type that you want to sync. You then have to
implement the `getState` and `updateState()` methods.

```dart
class MyState extends State<MyStatefulComponent> with SyncStateMixin<MyStatefulComponent, MyStateModel> {

  MyStateModel? model;

  // a globally unique id that is used to identify the state
  @override
  String get syncId => 'my_id';

  // this will get the state to be sent to the client
  // and is only executed on the server
  @override
  MyStateModel? getState() {
    return model;
  }

  // this will receive the state on the client
  // and it is safe to call setState
  void updateState(MyStateModel? value) {
    setState(() {
      model = value;
    });
  }
}
```

In order to send the data, it needs to be serialized on the server and deserialized on the client.
The serialization format is defined by the `syncCodec` getter defined in `SyncStateMixin`.

The codec must encode to a primitive or object value of one of the supported types: `Null, bool,
double, int, Uint8List, String, Map, List`. By default, the codec is null and your state must
already be one of the supported types.

When you want to use another type like a custom model class, you have to override the `syncCodec` getter, which
has to return a `Codec` that encodes to `String`. This can be any codec, however a typical use would be to
encode your model to `Map<String, dynamic>` and the fuse this with the json codec to get a json string.

```dart

class MyState extends State<MyStatefulComponent> with SyncStateMixin<MyStatefulComponent, MyStateModel> {

@override
Codec<MyStateModel, String> get syncCodec => MyStateModelCodec();

...
}

// codec that encodes a value of MyStateModel to Map<String, dynamic>
class MyStateModelCodec extends Codec<MyStateModel, Map<String, dynamic>> {

...

}
```

## Alternatives

You should also check out [@client components](/utils/at_client) that support passing data
from the server to the client, including easy support for custom types.
